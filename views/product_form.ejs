<!DOCTYPE html>
<html>
  <head>
    <%- include('./partials/head'); %>
  </head>
  <body>
    <div class="wrapper">
      <%- include('./partials/header'); %>
      <main>
        <%- include('./partials/nav'); %>
        <div class="content">
          <h1>Add new product</h1>
          <form method="post" action="">
            <label for="album">Album:</label>
            <select name="album">
              <% if (albums) { albums.sort((a, b) =>
              a.name.localeCompare(b.name)); albums.forEach((album) => { %>
              <option
                value="<%=album._id%>"
                <% if (locals.product && album._id.toString() === locals.product.album.toString()) { %>
                selected <%}%>
              >
                <%=album.name%>
              </option>
              <%}) }%>
            </select>
            <label for="Price">Price:</label>
            <input
              type="number"
              placeholder="19.99"
              name="price"
              value="<%!locals.product ? '': product.price %>"
            />
            <label for="number_in_stock">Number in stock:</label>
            <input
              type="number"
              placeholder="1"
              name="number_in_stock"
              value="<%!locals.number_in_stock ? '': product.number_in_stock %>"
            />
            <label for="format">Format:</label>
            <select name="format">
              <% if (formats) { formats.sort((a, b) =>
              a.name.localeCompare(b.name)); formats.forEach((format) => { %>
              <option
                value="<%=format._id%>"
                <% if (locals.product && format._id.toString() === locals.product.format.toString()) { %>
                selected <%}%>
              >
                <%=format.name%>
              </option>
              <%}) }%>
            </select>
            <button type="submit">Submit</button>
          </form>
          <ul>
            <% if (locals.errors) { errors.forEach((error) => { %>
            <li class="error"><%=error.msg%></li>
            <%}) } %>
          </ul>
        </div>
      </main>
      <%- include('./partials/footer'); %>
    </div>
  </body>
</html>
